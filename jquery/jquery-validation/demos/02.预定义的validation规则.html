<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jquery-validatuon</title>
    <!-- 1. 引入css -->
    <link href="../css/cmxform.css" rel="stylesheet" type="text/css" />
    <!-- 1. 引入jquery、jquery-validation、css-->
    <script type="text/javascript" src="../js/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="../js/jquery.validate.js"></script>
    <script type="text/javascript" src="../js/additional-methods.js"></script>
    <script type="text/javascript">
        function validateByJs() {
            $jqueryValidation.form();
        }
    </script>
</head>
<body>


    <form id="mainForm" action="www.baidu.com" method="post" enctype="multipart/form-data">
        <div>
            <label>firstName</label>
            <input type="text" name="firstName" />
        </div>
        <div>
            <label>lastName</label>
            <input type="text" name="lastName" />
        </div>
        <div>
            <label>age</label>
            <input type="text" name="age" />
        </div>
        <div>
            <label>email</label>
            <input type="text" name="email" />
        </div>
        <div>
            <label>url</label>
            <input type="text" name="url" />
        </div>
        <div>
            <label>date</label>
            <input type="text" name="date" />
        </div>
        <div>
            <label>creditcard</label>
            <input type="text" name="creditcard" />
        </div>
        <div>
            <label>accept</label>
            <input type="file" name="accept" />
        </div>
        <div>
            <label>zipcode</label>
            <input type="text" name="zipcode" />
        </div>
        <div>
            <input type="button" value="js触发验证" onclick="validateByJs();">
            <input type="submit" value="submit按钮触发验证">
        </div>
    </form>


    <!--
        自定义验证规则
            - jquery.validator.addMethod() - 添加自定义验证规则
             - jquery.validator.format() - 格式化错误信息
             - 校验方法 - 返回true=验证通过 返回false=验证不通过
        内置验证规则
            required:true - 是否必须
            maxlength     - 最大长度
            minlength     - 最小长度
            rangelnegth:[5,10] - 长度范围
            number:true   - 合法数字(小数、整数)
            digits:true   - 整数
            max           - 最大
            min           - 最小
            range         - 范围
            email:true    - 邮箱格式
            url:true      - url格式
            date:true     - date格式
            creditcard:true - 信用卡格式
            accept:         - 合法的文件上传后置
            equalTo:"#filed" - 等于什么
        -->
    <script type="text/javascript">
        let $form = $("#mainForm");
        /*
        * 自定义验证规则 -
        *  - jquery.validator.addMethod() - 添加自定义验证规则
        *  - jquery.validator.format() - 格式化错误信息
        * */
        // 邮政编码验证 - 返回true=验证通过 返回false=验证不通过
        jQuery.validator.addMethod("isZipCode", function(value, element) {
            var tel = /^[0-9]{6}$/;
            return this.optional(element) || (tel.test(value));
        },$.validator.format("不是一个合法的邮编地址"));

        let $jqueryValidation = $form.validate({
            rules:{
                firstName: {
                    required: true,
                    maxlength: 7,
                    minlength: 5
                },
                lastName: {
                    required: true,
                    rangelength: [5,7]
                },
                age: {
                    required: true,
                    digits: true,
                    max:100,
                    min: 18
                },
                "email":{
                    email: true
                },
                "url": {
                    url: true
                },
                "date": {
                    date: true
                },
                "creditcard":{
                    creditcard:true
                },
                accept: {
                    accept: [".jpg",".png"]
                },
                zipcode: "isZipCode"
            }
        })
    </script>
</body>
</html>